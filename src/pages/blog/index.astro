---
import BlogCard from '@components/blogCard.astro';
import Gallery from '@components/ui/gallery.astro';
import Heading from '@components/ui/heading.astro';
import { getCollection } from 'astro:content';
import Layout from 'src/layouts/Layout.astro';
import EmptyState from './components/emptyState.astro';

const posts = await getCollection('blog');
---

<Layout title="Blog">
  <div>
    <section class="bg-neutral02 py-xxl px-l grid gap-s">
      <Heading
        as="h1"
        variant="h2"
        class="text-h2 font-bold leading-h2 text-center"
      >
        Blog
      </Heading>
      <p class="leading-body text-center">
        Artículos sobre psicología, bienestar emocional y desarrollo personal
      </p>
    </section>
    <section
      class="px-l py-xl desktop:px-xxxl desktop:py-xxl flex justify-center"
    >
      {
        posts.length > 0 ? (
          <div class="desktop:max-w-[1200px] w-full">
            <Gallery>
              {posts.map((post: any) => (
                <li>
                  <a href={`/blog/${post.id}`}>
                    <BlogCard
                      title={post.data.title}
                      date={post.data.date}
                      summary={post.data.summary}
                      thumbnail={post.data.thumbnail}
                    />
                  </a>
                </li>
              ))}
            </Gallery>
          </div>
        ) : (
          <EmptyState />
        )
      }
    </section>
  </div>
</Layout>
