---
import BlogCard from '@components/blogCard.astro';
import Gallery from '@components/ui/gallery.astro';
import Heading from '@components/ui/heading.astro';
import { getCollection } from 'astro:content';
import Layout from 'src/layouts/Layout.astro';
import EmptyState from './components/emptyState.astro';

const posts = await getCollection('blog');
---

<Layout title="Blog">
  <div>
    <section class="bg-neutral02 py-xxl px-l grid gap-s">
      <Heading
        as="h1"
        variant="h2"
        class="text-h2 font-bold leading-h2 text-center"
      >
        Blog
      </Heading>
      <p class="leading-body text-center">
        Artículos sobre psicología, bienestar emocional y desarrollo personal
      </p>
    </section>
    <section
      class="px-l py-xl desktop:px-xxxl desktop:py-xxl flex justify-center"
    >
      {
        posts.length > 0 ? (
<<<<<<< HEAD
          <div class="desktop:max-w-[1200px] w-full">
            <Gallery>
              {posts.map((post: any) => (
                <li>
                  <a href={`/blog/${post.id}`}>
                    <BlogCard
                      title={post.data.title}
                      date={post.data.date}
                      summary={post.data.summary}
                      thumbnail={post.data.thumbnail}
                    />
                  </a>
                </li>
              ))}
            </Gallery>
=======
          <ul class="grid gap-s desktop:grid-cols-3">
            {posts.map(post => (
              <li>
                <a 
                  href={`/blog/${post.slug}`}
                  class="block hover:transform hover:scale-105 transition-transform duration-200"
                >
                  <article class="border-2 border-main06 rounded-default overflow-hidden h-full">
                    {post.data.thumbnail && (
                      <img 
                        src={post.data.thumbnail}
                        alt=""
                        class="w-full h-48 object-cover"
                      />
                    )}
                    <div class="p-l">
                      <Heading as="h2" variant="h3">
                        {post.data.title}
                      </Heading>
                      {post.data.date && (
                        <time 
                          datetime={post.data.date.toISOString()}
                          class="text-neutral07 block mt-2"
                        >
                          {new Date(post.data.date).toLocaleDateString('es-ES', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                          })}
                        </time>
                      )}
                    </div>
                  </article>
                </a>
              </li>
            ))}
          </ul>
        ) : (
          <div class="text-center py-xxl">
            <Heading as="h2" variant="h3" class="mb-4">
              No hay artículos disponibles
            </Heading>
            <p class="text-neutral07">
              Pronto publicaremos nuevo contenido. ¡Vuelve más tarde!
            </p>
>>>>>>> 1e142ae (Create blog section with gallery, empty state and 404)
          </div>
        ) : (
          <EmptyState />
        )
      }
    </section>
  </div>
</Layout>
