---
import Layout from '../../layouts/Layout.astro';
import Heading from '@components/ui/heading.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
---

<Layout>
  <section class="bg-neutral02 py-xxxl px-l grid gap-s">
    <Heading as="h1" variant="h2" class="text-center">
      Blog
    </Heading>
    <p class="leading-body text-center">
      Artículos sobre psicología, bienestar emocional y desarrollo personal
    </p>
  </section>

  <section class="px-l py-xl desktop:px-xxxl desktop:py-xxl flex justify-center">
    <div class="desktop:max-w-[1200px] w-full">
      {
        posts.length > 0 ? (
          <ul class="grid gap-s desktop:grid-cols-3">
            {posts.map(post => (
              <li>
                <a 
                  href={`/blog/${post.slug}`}
                  class="block hover:transform hover:scale-105 transition-transform duration-200"
                >
                  <article class="border-2 border-main06 rounded-default overflow-hidden h-full">
                    {post.data.thumbnail && (
                      <img 
                        src={post.data.thumbnail}
                        alt=""
                        class="w-full h-48 object-cover"
                      />
                    )}
                    <div class="p-l">
                      <Heading as="h2" variant="h3">
                        {post.data.title}
                      </Heading>
                      <time 
                        datetime={post.data.date.toISOString()}
                        class="text-neutral07 block mt-2"
                      >
                        {new Date(post.data.date).toLocaleDateString('es-ES', {
                          year: 'numeric',
                          month: 'long',
                          day: 'numeric'
                        })}
                      </time>
                    </div>
                  </article>
                </a>
              </li>
            ))}
          </ul>
        ) : (
          <div class="text-center py-xxl">
            <Heading as="h2" variant="h3" class="mb-4">
              No hay artículos disponibles
            </Heading>
            <p class="text-neutral07">
              Pronto publicaremos nuevo contenido. ¡Vuelve más tarde!
            </p>
          </div>
        )
      }
    </div>
  </section>
</Layout>